class SleepLock:

  def __init__(self):
    self.timer = None
    self.lock = getlock()

  def acquire(self):
    self.lock.acquire()

  def release(self):
    self.lock.release()

  def sleep(self, timeout):
    self.timer = settimer(timeout, self.wakeup, ())

  def wakeup(self):
    if self.timer:
      canceltimer(self.timer) 
      self.timer = None                   
      self.release()

